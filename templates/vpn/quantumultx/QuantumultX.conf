# > 参考
# https://github.com/ddgksf2013/Profile/blob/master/QuantumultX.conf
# https://github.com/guardiora/QuantumultX/blob/master/quantumultX_profile.conf
# https://github.com/limbopro/Profiles4limbo

[general]
# > 用于节点延迟测试
server_check_url=http://www.gstatic.com/generate_204
# > 服务器测试超时时间 (毫秒)
server_check_timeout=3000
# > 用于Check节点IP地址(以下geo_location_checker任选一个即可)
geo_location_checker=disabled
;geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js
;geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/Orz-3/Orz-3/master/QuantumultX/IP.js
# > 功能强大的解析器，用于引用资源的转换
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
# > 下列路径将不经过QuanX的处理
;excluded_routes=239.255.255.250/32, 24.105.30.129/32, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32
excluded_routes=10.0.0.0/8,17.0.0.0/8,24.105.30.129/32,100.64.0.0/10,172.16.0.0/12,182.162.132.1/32,185.60.112.157/32,185.60.112.158/32,192.168.0.0/16,239.255.255.250/32
# > DNS 排除列表
dns_exclusion_list=*.cmpassport.com,*.jegotrip.com.cn,*.icitymobile.mobi,id6.me,*.pingan.com.cn,*.cmbchina.com
# > UPD 白名单
;udp_whitelist=1-442, 444-65535
# > udp 服务策略
fallback_udp_policy = direct

[dns]
# 禁用系统 DNS
# 为了提高性能，会使用从当前网络(系统)中获取的 DNS 服务器(您可以使用「no-system」禁用此功能，但至少要增加一个自定义的 DNS 服务器。
;no-system

# 禁用 IPv6
# 当设置「no-ipv6」时，Quanumult X Tunnel 的 DNS 模块会直接让 AAAA 查询失败。
# > QuantumultX开启IPV6方法，删去下面的「no-ipv6」，在「VPN」栏中，开启「兼容性增强」
;no-ipv6

# 自定义 DNS
# > DNSPod Public DNS
server=119.29.29.29
# > Alibaba Public DNS
server=223.5.5.5
server=/*.icloud.com/119.29.29.29
server=/*.icloud.com.cn/119.29.29.29
server=/*.tencent.com/119.29.29.29
server=/*.weixin.com/119.29.29.29

# 在特定的网络环境下忽略自定义 DNS 可在后方加上「excluded_ssids」相关字段。
# 注意：如配置了 no-system，则请务必确保在忽略了部分自定义 DNS 的配置下至少有一个可用的自定义 DNS 配置。
# server=114.114.114.114, excluded_ssids=SSID1, SSID2

# > HTTP/3 的 DoH
;prefer-doh3

# DNS over HTTPS
# 当 DoH 服务器被设置时，所有其他普通的（没有与之相关的特定域）服务器将被忽略。
# 当设置了多个 DoH 服务器时，只有第一个会被使用。
# 当使用的 DoH 服务器不是基于 HTTP/2 时，DoH 将被暂时禁用，并使用常规服务器，直到下次启动 VPN 连接。
# 不建议在与防火墙相关的网络环境中使用，不确定 DoH 服务器是否总能被到达。
# 如果 DoH 服务器在您的国家或地区不是流行的 DNS 服务器，则不推荐使用，它可能会丢失 ISP DNS 服务器返回的 CDN 优化结果。
# 如果 DoH 服务器是一个反广告相关的服务器，则不推荐使用（Quantumult X 过滤模块对于被拒绝的域具有更好的性能，它可以避免客户端无休止的请求）。
# > DNSPod Public DNS DoH
;doh-server=https://doh.pub/dns-query
;doh-server=https://1.12.12.12/dns-query
;doh-server=https://120.53.53.53/dns-query

# > Alibaba Public DNS DoH
;doh-server=https://dns.alidns.com/dns-query
;doh-server=https://223.5.5.5/dns-query
;doh-server=https://223.6.6.6/dns-query

# 本地 DNS 映射
# Firebase Cloud Messaging
# address=/mtalk.google.com/108.177.125.188
# Google Dl
# server=/dl.google.com/119.29.29.29
# server=/dl.l.google.com/119.29.29.29

# > NETGEAR(网件)
server=/routerlogin.net/system
server=/routerlogin.com/system

# > TP-Link
server=/tplogin.cn/system
server=/tplinklogin.net/system
server=/melogin.cn/system
server=/falogin.cn/system

[policy]
static=🔰 Proxy, proxy, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/AmyTelecom.png

static=AppleProxy, 🔰 Proxy, direct, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/App_Store.png

static=Apple, direct, 🔰 Proxy, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png

static=OpenAI, 🔰 Proxy, direct,, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/StricklandF/AppIcon/main/OpenAI.png

static=PayPal, 🔰 Proxy, direct, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/PayPal.png

static=Telegram, 🔰 Proxy, direct, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram.png

# static=Reddit, 🔰 Proxy, direct, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Reddit.png

static=TikTok, 🔰 Proxy, direct, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/TikTok.png

static=OneDrive, 🔰 Proxy, direct, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/OneDrive.png

static=Microsoft, 🔰 Proxy, direct, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png

static=China, direct, 🔰 Proxy, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/China.png

static=Final, 🔰 Proxy, direct, server-tag-regex=(.*), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png

static=@香港, server-tag-regex=(?=.*(港|HK|(?i)Hong))^((?!(台|日|韩|新|美)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png

static=@台湾, server-tag-regex=(?=.*(台|TW|(?i)Taiwan))^((?!(港|日|韩|新|美)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png

static=@日本, server-tag-regex=(?=.*(日|JP|(?i)Japan))^((?!(港|台|韩|新|美)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png

# static=@韩国, server-tag-regex=(?=.*(韩|韓|朝|KR|(?i)Korea))^((?!(港|台|日|新|美)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/KR.png

static=@新加坡, server-tag-regex=(?=.*(新|狮|獅|SG|(?i)Singapore))^((?!(港|台|日|韩|兰|美)).)*$, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png

static=@美国, server-tag-regex=(?=.*(美|US|(?i)States|American))^((?!(港|台|日|韩|新)).)*$, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png

[server_remote]
{{ quantumultx.remote.server.url }}, tag={{ quantumultx.remote.server.tag }}, enabled=true, img-url={{ quantumultx.remote.server.img_url }}, update-interval={{ quantumultx.remote.server.interval }}

[server_local]

[filter_remote]
# > Advertising (广告拦截)
https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Advertising.list, tag=Advertising, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# > Hijacking (运营商劫持或恶意网站)
https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Malicious.list, tag=Hijacking, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# > Tracking (隐私保护)
https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Reject/Tracking.list, tag=Tracking, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true

# > AppleProxy
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/AppleProxy/AppleProxy.list, tag=AppleProxy, force-policy=AppleProxy, update-interval=172800, opt-parser=true, enabled=true

# > Apple
https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Ruleset/Extra/Apple/Apple.list, tag=Apple, force-policy=Apple, update-interval=172800, opt-parser=true, enabled=true

# > OpenAI
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/OpenAI/OpenAI.list, tag=OpenAI, force-policy=OpenAI, update-interval=172800, opt-parser=false, enabled=true

# > PayPal
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/PayPal/PayPal.list, tag=PayPal, force-policy=PayPal, update-interval=172800, opt-parser=false, enabled=true

# > Telegram
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Telegram/Telegram.list, tag=Telegram, force-policy=Telegram, update-interval=172800, opt-parser=false, enabled=true

# > Reddit
# https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Reddit/Reddit.list, tag=Reddit, force-policy=Reddit, update-interval=172800, opt-parser=false, enabled=true

# > TikTok
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/TikTok/TikTok.list, tag=TikTok, force-policy=TikTok, update-interval=172800, opt-parser=false, enabled=true

# > OneDrive
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/OneDrive/OneDrive.list, tag=OneDrive, force-policy=OneDrive, update-interval=172800, opt-parser=false, enabled=true

# > Microsoft
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Microsoft/Microsoft.list, tag=Microsoft, force-policy=Microsoft, update-interval=172800, opt-parser=false, enabled=true

# > ChinaASN
https://raw.githubusercontent.com/VirgilClyne/GetSomeFries/main/ruleset/ASN.China.list, tag=ChinaASN, force-policy=China, update-interval=172800, opt-parser=true, enabled=true

# > ChinaX
https://raw.githubusercontent.com/druagoon/h451/master/QuantumultX/rules/x/China/China.list, tag=ChinaX, force-policy=China, update-interval=172800, opt-parser=false, enabled=true

# > China
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/China/China.list, tag=China, force-policy=China, update-interval=172800, opt-parser=false, enabled=true

[filter_local]
# > 贴吧屏蔽域名dns查询
ip-cidr,180.76.76.200/32,reject

# > Local
host-suffix,local,direct
ip-cidr,192.168.0.0/16,direct
ip-cidr,10.0.0.0/8,direct
ip-cidr,172.16.0.0/12,direct
ip-cidr,127.0.0.0/8,direct
ip-cidr,100.64.0.0/10,direct
ip-cidr,224.0.0.0/4,direct
ip6-cidr,fe80::/10,direct

# > General
geoip,cn,China
final,Final

[rewrite_remote]
https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/YoutubeAds.conf, tag=油管去广告@Maasea, update-interval=86400, opt-parser=false, enabled=false
https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/Weibo.conf, tag=微博去广告@ddgksf2013, update-interval=86400, opt-parser=false, enabled=false
https://raw.githubusercontent.com/ConnersHua/RuleGo/master/Surge/Module/Block/Advertising.sgmodule, tag=神机去广告, update-interval=86400, opt-parser=true, enabled=false
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rewrite/QuantumultX/Redirect/Redirect.conf, tag=通用重写, update-interval=86400, opt-parser=false, enabled=true

[rewrite_local]

[mitm]
